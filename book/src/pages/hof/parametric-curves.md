## Parametric Curves

```scala mdoc:invisible
import doodle.core._
import doodle.image._
import doodle.syntax.all._
import doodle.image.syntax.all._
import doodle.java2d._
```

We're now going to learn about another tool for creating interesting shapes, called a *parametric curve* or *parametric equation*. The core idea is very similar to how we went about creating polygons. 
A parametric equation is a function from some input (the parameter in "parametric") to a point.
The input tells us how far along the curve we are. 
For example, a parametric equation for a circle might have as its input an angle and it would give us the point on the circle at that angle.
In Scala we could write

```scala mdoc
def parametricCircle(angle: Angle): Point =
  Point(100, angle)
```

choosing the arbitrary value of `100` as the radius.

If we choose lots of different values for the input, and then draw a shape at each point we get back from the parametric equation, we can suggest the shape of the curve.

@:doodle("parametric-circle", "HofParametricCircle.circle")

In @:fref(hof:parametric-circles) we give an example of drawing small circles at the points generated by the parametric equation for a circle. 
Going from left to right we draw points every 90, 45, and 22.5 degrees.
You can see how the outline of the shape, the large circle, becomes clearer as we draw more points.

@:figure{ img = "./parametric-circles.svg", key = "#fig:hof:parametric-circles", caption = "Parametric circle with points drawn, from left to right, every 90, 45, and 22.5 degrees." }

To create parametric curves we need to learn 1) how to represent points in Doodle, 2) how to position an image at a particular point in space, and 3) revise a bit of geometry you might not have touched since high school. Let's look at each item in turn.




## Putting It All Together

We can put this all together to create a parametric circle.
In cartesian coordinates the code for a parametric circle with radius 200 is

```scala mdoc:reset:invisible
import doodle.core._
import doodle.image._
import doodle.syntax.all._
import doodle.image.syntax.all._
import doodle.java2d._
```
```scala mdoc:silent
def parametricCircle(angle: Angle): Point =
  Point.cartesian(angle.cos * 200, angle.sin * 200)
```

In polar form it is simply

```scala mdoc:reset:invisible
import doodle.core._
import doodle.image._
import doodle.syntax.all._
import doodle.image.syntax.all._
import doodle.java2d._
```
```scala mdoc:silent
def parametricCircle(angle: Angle): Point =
  Point.polar(200, angle)
```

Now we could sample a number of points evenly spaced around the circle. To create an image we can draw something at each point (say, a triangle). 

```scala mdoc:silent
def sample(samples: Int): Image = {
  // Angle.one is one complete turn. I.e. 360 degrees
  val step = Angle.one / samples
  val dot = Image
              .triangle(10, 10)
              .fillColor(Color.limeGreen)
              .strokeColor(Color.lawngreen)
  def loop(count: Int): Image = {
    val angle = step * count
    count match {
      case 0 => Image.empty
      case n =>
        dot.at(parametricCircle(angle)).on(loop(n - 1))
    }
  }
  
  loop(samples)
}
```

This is a structural recursion, which is hopefully a familiar pattern by now.

If we draw this we'll see the outline of a circle suggested by the triangles.
See @:fref(hof:triangle-circle), which shows the result of `sample(72)`.

@:figure{ img = "./triangle-circle.svg", key = "#fig:hof:triangle-circle", caption = "Triangles arranged in a circle, using the code from `sample` above." }


### Parametric Curves as First-class Functions

So far we haven't seen anything that requires we use our parametric curves as functions instead of methods (and, indeed, we have defined them as method though we know we can easily convert methods to functions.) It's time we got something useful from functions. Remember that functions are first-class values, which means: we can pass them to a method, we can return them from a method, and we can give them a name using `val`. We're going to see an example where the first property---the ability to pass them as parameters---is useful.

We've just defined a method called `sample` that samples from our parametric curve. Right now it is restricted to sampling from the method `parametricCircle`. It would make a lot of sense to reuse this method with different parametric curves, which means we need to be able to pass a parametric curve to sample from to the `sample` method. We can do this with a function parameter. Here is what the code might look like.

```scala mdoc:reset:invisible
import doodle.core._
import doodle.image._
import doodle.syntax.all._
import doodle.image.syntax.all._
import doodle.java2d._
```
```scala mdoc:silent
def sample(samples: Int, dot: Image, curve: Angle => Point): Image = {
  val step = Angle.one / samples
  def loop(count: Int): Image = {
    val angle = step * count
    count match {
      case 0 => Image.empty
      case n =>
        dot.at(curve(angle)).on(loop(n - 1))
    }
  }
  
  loop(samples)
}
```

In this implementation of sample I have added *two* new parameters, the parametric curve to sample from and the `Image` to use to draw the samples. This gives us more flexibility in the output. Now we just need to define some more parametric curves, which is what the next exercise involves.


#### Exercises {-} 

We have some new tools in our toolbox. It's time to have some fun exploring what we can do with them.


##### Spirals

To create a circle we keep the radius constant as the angle increases. If, instead, the radius increases as the angle increases we'll get a spiral. (How quickly should the radius increase? It's up to you! Different choices will give you different spirals.)

Implement a function or method `parametricSpiral` that creates a spiral.

<div class="solution">
Here's a type of spiral, known as a logarithmic spiral, that has a particularly pleasing shape. `sample` it and see for yourself!

```scala mdoc:silent
def parametricSpiral(angle: Angle): Point =
  Point((Math.exp(angle.toTurns) - 1) * 200, angle)
```
</div>


##### Samples 

Use the parametric curves we have defined so far to create something interesting. There is an example in @:fref(hof:psychedelic-spirals)

@:figure{ img = "./psychedelic-spirals.svg", key = "hof:psychedelic-spirals", caption = "A picture created using the parametric curves we have seen so far." }
